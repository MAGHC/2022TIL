### 브라우저 런타임 환경

브라우저 런타임 환경에는

render

마이크로 테스크 큐

테스크 큐가 있다.

render는 처음에 정리했듯이 렌더링 순서에 의해 렌더링 되는 것들의 모음이고

마이크로 테스크 큐는
promise then 이나 mutation observer 들이 들어가는 곳이다

테스크 큐는

이벤트리스너나 인터벌 같은애들 들어가는곳

### 이벤트 루프

테스크 큐와 자바스크립트의 콜스택을 계속 돌면서 관찰하는 것이 이벤트 루프인데

돌아가는 프로세스는 이렇게

렌더 는 매번 돌때마다 들르지는 않는다

왜냐면 가장 부드러운 움직임이 1초에 15프레임 정도 되는데 이벤트 루프의 속도는 엄청나게 빨라서 렌더에 계속 들를 필요가없다.

마이크로 테스크 큐에는 들러서 하나씩 콜스택에 쌓아주고 나중에 또 들어오는 promise 나 observer 같은 애들을 다 처리할때까지 이벤트 루프가 머물러 있는다.

반면에 테스크 큐에 있는 리스너나셋타임 아웃같은애들은 콜스택에 하나씩 빼고 실행한다음 다시 한바퀴를 돈다 다실행할떄까지 기다리지않음

### 중요 포인트

콜 스택에 있는 것은 끝날 떄 까지 가 보장이된다는 것

그러니까 콜스택에 엄청나게 긴 처리가 필요한 함수가 들어오게 되면 브라우저가 멈춤

### request animaition api

render 에는 request animaition api 가 있는데

이 api 콜백을 통해 브라우저에 등록을 하게되면

브라우저가 업데이트 되기 전에
이콜백을 실행하게 된다.

### js로 돔조작할때

그래서 js로 돔 조작할떄 요소를 먼저만들고 거기안에 어트리뷰트를 먼저 넣고 컬러 넣고 나중에 차일드로 넣던지

미리 차일드로 넣고 어트리뷰트를 넣던지 상관이 없는 이유는.

어짜피 안에있는게 다 실행되고 나서 실행되기 떄문에 그렇다.

그래서 color를 여러개 백날 바꿔봐야 마지막 하나만 처리됨
